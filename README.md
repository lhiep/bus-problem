# BUS PROBLEM
This problem involves solving for the logistic of constructing the electrical components of a light up dance floor consisting of 81 tiles (9x9). The problem can be broken down into 3 sections: the hardware setup, the topology, and the protocol to transfer data.

# HARDWARE SETUP
The 81 tiles in a 9x9 configuration can be broken down into 9 separate chunks, each consists of a 3x3 tiles. In total, we have 3x3 chunks where each chunk has 3x3 tiles. Each chunk can be controlled by 4 shift registers (74HC595) that can provide up to 32 outputs. The signals will propagate from a pre-programmed FPGA through 3 pair of twisted-pair wires (a total of 6 wires) to the shift registers (36 total) in a S shaped daisy chained configuration. From each pair of shift register, regular wires can be used to connected to the respective light tiles.

# TOPOLOGY
As stated above, each 3x3 tiles are combined into a chunk. The entire dance floor is broken down into 9 chunks in a 3x3 configuration. Each chunk can further be broken down into 9 tiles in a 3x3 configuration. Each tile in the chunk is controlled by 4 shift registers, which will provide 32 outputs. Each tile requires 3 outputs for the red, green, and blue LED respectively, for a combination of 27 outputs. This means 5 outputs from the shift registers of each chunk will be empty (filled with zeros). The 3x3 chunks are daisy chained in series in a reversed S shape configuration. The FPGA will feed to one end of the S shape. An advantage of this configuration is that the signals arriving at the last chunk (farthest away from the FPGA) and the signals arriving at the first chunk (nearest to the FPGA) will happen simultaneously, or within a short time delay of each other. This is due to the fact the signals take time to propagate. Each chunk will also be provided its own power to supply to the LEDs separately from the FPGA-shift registers network. Power from the power supply will traverse through the shift registers to the corresponding LEDs that need to be lit up.

# PROTOCOL
Using the popular SPI protocol, data can be sent synchronously to all the shift registers. To achieve a desirable 60 frames per second animation, each shift register needs to receive its data within (1/60)/(36*8) seconds since there are 36 shift registers, each requires 8 bits, and each bit reqires a clock signal. This translates to 1/17280th of a second, or approximately 17kHz. Since this is well under the FPGA's clock speed (and many microcontroller's that operates at 8MHz), the signal should arrives in time for a smooth animation using the dance floor. Since all the shift registers can be daisy chained, a continuous signal can be sent to all the shift registers without any interruption. A total of 36 bytes can be sent for every frame of the animation. Each group of 4 bytes out of the 36 corresponds to a chunk, whereas the last chunk's data (farthest away from the FPGA) will be sent first and the first chunk's data (nearest to the FPGA) will be sent last. Each group of 4 bytes contains 9 groups of 3 bits, corresponding to each color of an RGB led. As stated before, 5 of the 32 bits will be empty. The order in which these bits are sent will based on how the tiles are connected to the shift registers. By default, the shift registers can only accepts 5V DC power and supply the LEDs with 5V power. However, higher voltage LEDs can be used by putting a transistor between the shift register and the LED, ultimately using the shift register as a switch.
